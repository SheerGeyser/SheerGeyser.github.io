<!DOCTYPE html>
<html>

<head>
    <title>Login page</title>
    <link rel="stylesheet" href="./css/login.css">
</head>

<body>



    <input type="number" style="display: none;" id="tri" value=0 />
    <form class="box">
        <h1><label for="pswd">LOGIN</label></h1>
        <input type="text" placeholder="Login" id="login">
        <input type="password" placeholder="Password" id="pswd">
        <input type="button" value="Submit" onclick="checkPswd();" />
    </form>




    <!--Function to check password the already set password is admin-->

    <script type="text/javascript">
        //дириктива, чтобы указать браузеру, что код должен работать в современном режиме 
        "use strict";

        // function checkPswd() {
        //     const logins = ["Mango", "robotGoogles", "Poly", "Aj4x1sBozz", "qwerty123"];
        //     let confirmPassword = "RWh5bGFnMjc=";
        //     let password = document.getElementById("pswd").value;
        //     let login = document.getElementById("login").value;
        //     let incorPass = document.getElementById("tri").value;



        //     //проверка на количество символов
        //     if (login.length < 4 || login.length > 16) {
        //         alert('Логин должен быть от 4 до 16 символов');
        //         //проверка на совпадения
        //         if (logins.includes == login) {
        //             alert('Такого логина не существует!');
        if (incorPass == 3) {
            window.close();
        }
        //             if (password == window.atob(confirmPassword)) {
        //                 window.location = window.atob("bWFpbi5odG1s");
        //             } else {
        //                 document.getElementById("tri").setAttribute('value', `${parseInt(incorPass)+1}`);
        //                 var tries = 3 - incorPass;
        //                 alert(`Не верный пароль. Осталось ${tries} попытки`);
        //             }
        //         }
        //     }
        // }


        function checkPswd() {
            var confirmPassword = "RWh5bGFnMjc=";
            var password = document.getElementById("pswd").value;
            var incorPass = document.getElementById("tri").value;
            const logins = ["Mango", "robotGoogles", "Poly", "Aj4x1sBozz", "qwerty123"];
            var login = document.getElementById("login").value;



            if (logins.includes(login)) {
                var tlogins = true;
            } else {
                alert('Такого логина не существует!');
            }

            if (login.length < 4 || login.length > 16) {
                alert('Логин должен быть от 4 до 16 символов');

            }

            if (password == window.atob(confirmPassword)) {
                var tpass = true;
                if ((tlogins) && (tpass)) {
                    window.location = "main.html";
                }
            } else {
                document.getElementById("tri").setAttribute('value', `${parseInt(incorPass)+1}`);
                var tries = 3 - incorPass;
                alert(`Не верный пароль. Осталось ${tries} попытки`);
            }
            if (incorPass == 3) {
                document.querySelectorAll('form').forEach(form => form.remove());
            }
        }
    </script>
</body>

</html>